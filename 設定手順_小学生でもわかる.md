# 🔧 エラー修正手順（小学生でもわかる説明）

## 🚨 現在のエラーについて
「TypeError: Failed to fetch」というエラーが出ています。これは、アプリがSupabase（データベース）に接続できないことが原因です。

## 📋 解決手順（ステップバイステップ）

### ステップ1: Supabaseアカウントを作成する

1. **ブラウザでSupabaseのサイトを開く**
   - アドレスバーに `https://supabase.com` と入力してEnterキーを押す

2. **「Start your project」ボタンをクリック**
   - 画面の右上にある緑色のボタンをクリック

3. **GitHubアカウントでログイン**
   - 「Continue with GitHub」をクリック
   - GitHubアカウントがない場合は、先にGitHubアカウントを作成してください

### ステップ2: 新しいプロジェクトを作成する

1. **「New Project」ボタンをクリック**
   - ダッシュボードの右上にあるボタン

2. **プロジェクト情報を入力**
   - **Name**: `blog-writer-app` （好きな名前でOK）
   - **Database Password**: 強力なパスワードを入力（忘れないようにメモしておく）
   - **Region**: `Northeast Asia (Tokyo)` を選択

3. **「Create new project」をクリック**
   - プロジェクトの作成に2-3分かかります

### ステップ3: プロジェクトの設定を取得する

1. **プロジェクトが作成されたら、左側のメニューから「Settings」をクリック**

2. **「API」をクリック**

3. **以下の情報をコピーしてメモ帳に保存**
   - **Project URL**: `https://xxxxxxxxxxxxx.supabase.co` のようなURL
   - **anon public**: 長い文字列（`eyJ...` で始まる）

### ステップ4: 環境変数ファイルを作成する ⭐ **重要**

1. **プロジェクトフォルダを開く**
   - エクスプローラーで `blog-writer-app` フォルダを開く

2. **新しいファイルを作成**
   - フォルダ内で右クリック → 「新規」→ 「テキストドキュメント」

3. **ファイル名を変更**
   - ファイル名を `.env.local` に変更（拡張子も含めて）
   - 警告が出たら「はい」をクリック

4. **ファイルを開いて以下を入力**
   ```
   NEXT_PUBLIC_SUPABASE_URL=https://あなたのプロジェクトURL
   NEXT_PUBLIC_SUPABASE_ANON_KEY=あなたのanonキー
   ```
   
   **例:**
   ```
   NEXT_PUBLIC_SUPABASE_URL=https://abcdefghijklmnop.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```

5. **ファイルを保存**
   - Ctrl + S で保存

⚠️ **注意**: このファイルがないと「Failed to fetch」エラーが発生します！

### ステップ5: データベーステーブルを作成する

1. **Supabaseダッシュボードで「Table Editor」をクリック**

2. **「Create a new table」をクリック**

3. **profilesテーブルを作成**
   - **Name**: `profiles`
   - **Enable Row Level Security**: ✅ チェック
   - **画面右上の「Insert」ボタン**をクリック

4. **テーブルに列を追加（必要な場合のみ）**
   - 既に存在するカラムは追加不要です
   - 不足しているカラムのみ **Add Column** をクリックして追加:
     - `email` (text) - メールアドレス用
     - その他のカラムは既に存在している可能性があります

5. **articlesテーブルを作成**
   - 同様の手順で以下を作成:
     - **Name**: `articles`
     - **Enable Row Level Security**: ✅ チェック
     - **画面右上の「Insert」ボタン**をクリック
     - **Add Column** をクリックして以下を追加:
       - `user_id` (uuid)
       - `title` (text)
       - `theme` (text)
       - `target_audience` (text)
       - `heading` (text)
       - `status` (text)
       - `created_at` (timestamptz)
       - `updated_at` (timestamptz)

6. **article_sectionsテーブルを作成**
   - 同様の手順で以下を作成:
     - **Name**: `article_sections`
     - **Enable Row Level Security**: ✅ チェック
     - **画面右上の「Insert」ボタン**をクリック
     - **Add Column** をクリックして以下を追加:
       - `article_id` (uuid)
       - `section_number` (int4)
       - `title` (text)
       - `description` (text)
       - `content` (text)
       - `word_count` (int4)
       - `is_completed` (bool)
       - `created_at` (timestamptz)
       - `updated_at` (timestamptz)

### ステップ6: アプリを再起動する

1. **ターミナル（コマンドプロンプト）を開く**
   - Windowsキー + R → `cmd` と入力 → Enter

2. **プロジェクトフォルダに移動**
   ```cmd
   cd "C:\Users\t-ich\Documents\いまにゅClaud AI Cording202507\cord4biz AI cording_20250821から\Webアプリ開発\blog-generator\blog-writer-app"
   ```

3. **開発サーバーを停止**
   - Ctrl + C を押す

4. **開発サーバーを再起動**
   ```cmd
   npm run dev
   ```

### ステップ7: 動作確認

1. **ブラウザでアプリを開く**
   - `http://localhost:3000` にアクセス

2. **新規登録を試す**
   - 登録フォームに情報を入力
   - エラーが出なくなれば成功！

## 🆘 困ったときは

### よくある問題と解決方法

**Q: ファイル名を変更できない**
A: ファイルの拡張子を表示する設定にしてください
- エクスプローラーの「表示」タブ → 「ファイル名拡張子」にチェック

**Q: .env.localファイルが保存できない**
A: テキストエディタ（メモ帳など）で作成してください

**Q: Supabaseでプロジェクトが見つからない**
A: 正しいアカウントでログインしているか確認してください

**Q: まだエラーが出る**
A: 以下を確認してください:
- .env.localファイルが正しい場所にあるか
- URLとキーが正しくコピーされているか
- 開発サーバーを再起動したか

## 📞 サポート

設定で困った場合は、以下の情報と一緒に質問してください:
- どのステップで困っているか
- エラーメッセージの内容
- スクリーンショット（可能であれば）
